<div class="flex justify-center items-center w-[100%]">
    <div class="card p-4 shadow-lg">
        <h1 class="text-center text-3xl mb-3 font-bold">Clientes registrados</h1>
        <p-table #dt2 [value]="usuarios" dataKey="id" [rows]="5" [rowsPerPageOptions]="[5, 25, 50]" [loading]="loading"
            [paginator]="true" [globalFilterFields]="['nombre', 'nit', 'telefono', 'cui']" [tableStyle]="{ 'min-width': '75rem' }">
            <ng-template #caption>
                <div class="flex">
                    <p-iconfield iconPosition="left" class="ml-auto">
                        <p-inputicon>
                            <i class="pi pi-search"></i>
                        </p-inputicon>
                        <input pInputText type="text" (input)="dt2.filterGlobal($any($event.target).value, 'contains')"
                            placeholder="Filtrar por nombre, edad, email" />
                    </p-iconfield>
                    <p-iconfield iconPosition="left" class="ml-auto">
                        <p-inputicon>
                            <i class="pi pi-search"></i>
                        </p-inputicon>
                        <div class="card flex justify-center">
                            <p-button label="Registrar cliente" (click)="showDialog()" />
                        </div>
                    </p-iconfield>
                </div>
            </ng-template>
            <ng-template #header>
                <tr>
                    <th style="width: 30%;">Nombre</th>
                    <th style="width: 20%;">Email</th>
                    <th style="width: 20%;">Edad</th>
                    <th style="width: 15%;">Acciones</th>
                </tr>
            </ng-template>
            <ng-template #body let-cliente>
                <tr>
                    <td>{{ cliente.nombre }}</td>
                    <td>{{ cliente.email }}</td>
                    <td>{{ cliente.edad }}</td>
                    <td>
                        <p-button label="Detalles" icon="pi pi-eye" class="p-button-sm p-button-warning"
                            (click)="showEditDialog(cliente)" />
                    </td>
                </tr>
            </ng-template>
            <ng-template #emptymessage>
                <tr>
                    <td colspan="5">No se encontraron clientes</td>
                </tr>
            </ng-template>
        </p-table>

        <!-- modal para registrar y editar cliente -->
        <p-dialog [header]="editMode ? 'Editar cliente' : 'Registrar cliente'" [modal]="true" [(visible)]="visible"
            [style]="{ width: '40rem' }">
            <span class="p-text-secondary block mb-8">{{ editMode ? 'Editar cliente' : 'Registrar nuevo cliente' }}</span>

            <div class="flex items-center gap-4 mb-4">
                <label for="nombreCliente" class="font-semibold w-24">Nombre</label>
                <input pInputText id="nombreCliente" class="w-full" autocomplete="off"
                    [(ngModel)]="usuario.nombre" />
            </div>

            <div class="flex items-center gap-4 mb-4">
                <label for="email" class="font-semibold w-24">Email</label>
                <input pInputText id="email" class="w-full" autocomplete="off"
                    [(ngModel)]="usuario.email" />
            </div>

            <div class="flex items-center gap-4 mb-4">
                <label for="edad" class="font-semibold w-24">Edad</label>
                <input pInputText id="edad" class="w-full" autocomplete="off"
                    [(ngModel)]="usuario.edad" />
            </div>


            <div class="flex justify-end gap-2">
                <p-button label="Cancelar" severity="secondary" (click)="visible = false" />
                <p-button [label]="editMode ? 'Actualizar' : 'Guardar'" (click)="accionCliente()" />
            </div>
        </p-dialog>
    </div>
</div>
